<mat-card class="task-form-card">
  <div class="form-header">
    <h3>Edit Task</h3>
    <button mat-icon-button class="delete-btn" (click)="onDelete()">
      <mat-icon>delete</mat-icon>
    </button>
  </div>

  <mat-form-field appearance="outline" style="width:100%">
    <mat-label>Task Title</mat-label>
    <input matInput name="taskTitle" [(ngModel)]="taskTitle" placeholder="Enter task title">
  </mat-form-field>

  <mat-form-field appearance="outline" style="width:100%">
    <mat-label>Description</mat-label>
    <textarea matInput name="taskDescription" [(ngModel)]="taskDescription" placeholder="Enter task description" rows="3"></textarea>
  </mat-form-field>

  <div class="form-row">
    <mat-form-field appearance="outline" style="flex:1">
      <mat-label>Time</mat-label>
      <input matInput type="time" name="taskTime" [(ngModel)]="taskTime">
    </mat-form-field>

    <mat-form-field appearance="outline" style="flex:1">
      <mat-label>Priority</mat-label>
      <mat-select name="taskPriority" [(ngModel)]="taskPriority">
        <mat-option [value]="0">Low</mat-option>
        <mat-option [value]="1">Medium</mat-option>
        <mat-option [value]="2">High</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="form-row">
    <mat-form-field appearance="outline" style="flex:1">
      <mat-label>Status</mat-label>
      <mat-select name="taskStatus" [(ngModel)]="taskStatus">
        <mat-option *ngFor="let option of taskStatusOptions" [value]="option.value">
          {{ option.label }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" style="flex:1">
      <mat-label>Category</mat-label>
      <mat-select name="taskCategory" [(ngModel)]="taskCategory">
        <mat-option *ngFor="let cat of categories" [value]="cat.id">
          <span *ngIf="cat.id !== 'all'" class="dot" [style.background]="cat.color"></span> {{cat.name}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="form-row">
    <mat-form-field appearance="outline" style="flex:1">
      <mat-label>Start Date</mat-label>
      <input matInput [matDatepicker]="startPicker" name="taskStartDate" [(ngModel)]="taskStartDateObj" (change)="onStartDateChange()">
      <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
      <mat-datepicker #startPicker></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="outline" style="flex:1">
      <mat-label>End Date</mat-label>
      <input matInput [matDatepicker]="endPicker" name="taskEndDate" [(ngModel)]="taskEndDateObj" (change)="onEndDateChange()">
      <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
      <mat-datepicker #endPicker></mat-datepicker>
    </mat-form-field>
  </div>

  <div class="form-actions">
    <button mat-button class="save-btn" (click)="onUpdate()">Update Task</button>
    <button mat-button (click)="onCancel()">Cancel</button>
  </div>
</mat-card>
